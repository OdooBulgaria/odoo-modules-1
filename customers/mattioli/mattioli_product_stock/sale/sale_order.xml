<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="mattioli_package_manager_sale_order_view_order_form" model="ir.ui.view">
            <field name="name">mattioli.package.manager.sale.order.view.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
	           	<xpath expr="//field[@name='order_line']/form/group/group/field[@name='th_weight']" position="after">
	                      <field name="length" on_change="onchange_sizes(product_id, product_uom_qty, length, width, thickness)"/>
	                      <field name="width" on_change="onchange_sizes(product_id, product_uom_qty, length, width, thickness)"/>
	                      <field name="thickness" on_change="onchange_sizes(product_id, product_uom_qty, length, width, thickness)"/>
	           	</xpath>     
	           	<xpath expr="//field[@name='order_line']/tree/field[@name='price_unit']" position="before">
	           	    	  <field name="price_uos" on_change="onchange_price_uos(product_id, price_uos, product_uom_qty, product_uos_qty)" attrs="{'invisible': [('price_uos', '=', 0)]}"/>
	           	</xpath>       	           	   		
	           	<xpath expr="//field[@name='order_line']/form/group/group/field[@name='price_unit']" position="after">
	           	    	  <field name="price_uos" on_change="onchange_price_uos(product_id, price_uos, product_uom_qty, product_uos_qty)" attrs="{'invisible': [('price_uos', '=', 0)]}"/>
	           	</xpath>              		                 	          
            </field>
        </record>               	    

        <record id="mattioli_package_manager_sale_order_view_order_form_inherit" model="ir.ui.view">
            <field name="name">mattioli.package.manager.sale.order.view.order.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_stock.view_order_form_inherit"/>
            <field name="arch" type="xml">
	   	        <xpath expr="//field[@name='order_line']/form//field[@name='product_uos_qty']" position="replace">
		              <field context="{'partner_id':parent.partner_id, 'quantity':product_uos_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom}"
		                    name="product_uos_qty" class="oe_inline"
		                    on_change="onchange_uos_qty(product_id, price_uos, product_uom_qty, product_uos_qty, parent.date_order, parent.pricelist_id, parent.partner_id, context)"/>
		        </xpath>           		            		                 	          
            </field>
        </record>          
        
	</data>
</openerp>
