<?xml version="1.0" encoding="utf-8"?>

<openerp>
    <data>

	    <record id="view_partner_form_discount_montecristo" model="ir.ui.view">
	        <field name="name">res.partner.discount.view.montecristo</field>
	        <field name="model">res.partner</field>
	        <field name="inherit_id" ref="account_discount.view_partner_form_discount"/>
	        <field name="arch" type="xml">
	            <xpath expr="//tree[@string='Sconti globali']/field[@name='type']" position="attributes" >
	            	<attribute name="invisible">1</attribute>
	            </xpath> 
	        </field>
	    </record>        
        
        <record id="view_res_partner_salesagent_commission_montecristo" model="ir.ui.view">
            <field name="name">res.partner.form.salesagent.commission.montecristo</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="salesagent_commissions.view_res_partner_salesagent_commission"/>
            <field name="arch" type="xml">
        		<xpath expr="//field[@name='salesagent']" position="after">     		    
                    <field name="id" string="Codice Agente" attrs="{'invisible':[('salesagent','in',[False,None])]}"/>
            	</xpath>                
        		<xpath expr="//field[@name='commission']" position="after">
                    <field name="subagent_commission_reduction" colspan ="4" nolabel="1"/>
                    <field name="id" invisible="[('salesagent','=',True)]"/>
            	</xpath>            
        		<xpath expr="//field[@name='product_provvigioni_ids']/tree/field[@name='commission']" position="after">
                	<field name="subagent_product_commission_reduction" required="1"/>
            	</xpath>	
        		<xpath expr="//field[@name='product_category_provvigioni_ids']/tree/field[@name='commission']" position="after">
                	<field name="subagent_category_commission_reduction" required="1"/>
            	</xpath>
            	<xpath expr="//field[@name='street']" position="attributes">
            	    <attribute name="required">1</attribute>
            	</xpath>
            	<xpath expr="//field[@name='city']" position="attributes">
            	    <attribute name="required">1</attribute>
            	</xpath> 
            	<xpath expr="//field[@name='zip']" position="attributes">
            	    <attribute name="required">1</attribute>
            	</xpath>
            	<xpath expr="//field[@name='country_id']" position="attributes">
            	    <attribute name="required">1</attribute>
            	</xpath>          		
 				<xpath expr="//field[@name='salesagent_for_customer_id']" position="attributes">
 				    <attribute name="on_change">onchange_salesagent_for_customer_id()</attribute>
 				</xpath>
 				<xpath expr="//field[@name='salesagent_for_customer_id']" position="after">
 				    <field name="second_salesagent_for_customer_id" domain="[('salesagent','=',True)]" attrs="{'invisible':[('customer','=',False)]}"/>
 				</xpath>
				<xpath expr="//field[@name='website']" position="after">
	                <label for="vat"/>
	                <div name="vat_info">
	                    <field name="vat" on_change="vat_change(vat)" placeholder="e.g. BE0477472701" class="oe_inline"/>	                    
	                    <label for="force_vat"/>
	                    <field name="force_vat" attrs="{'invisible':[('is_current_salesagent','=',True)]}"/>
	                </div>             	
            	</xpath>
                <xpath expr="//field[@name='name']" position="after">
                    <field name="is_current_salesagent" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='name']" position="after">
                    <field name="is_current_salesagent" invisible="1"/>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']" position="attributes">
                    <attribute name="attrs">{'invisible':[('is_current_salesagent','=',True)]}</attribute>
                </xpath>                                    		            	        	            	            	           		                
            </field>
        </record>        

        <record id="view_partner_form_montecristo" model="ir.ui.view">
            <field name="name">res.partner.vat.inherit.montecristo</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base_vat.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//label[@for='vat']" position = "replace" />
            	<xpath expr="//div[@name='vat_info']" position="replace" />                
            </field>
        </record>        

        <record id="view_delivery_makeover_res_partner_form2_montecristo" model="ir.ui.view">
            <field name="name">delivery.makeover.res.partner.form2.montecristo</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="l10n_it_ddt_makeover.view_delivery_makeover_res_partner_form2"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@string='Stock Delivery Options']" position="attributes">
                    <attribute name="attrs">{'invisible':[('is_current_salesagent','=',True)]}</attribute>
                </xpath> 
            </field>
        </record>        


        <record id="montecristo_view_res_partner_filter" model="ir.ui.view">
            <field name="name">montecristo.view.res.partner.filter</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_res_partner_filter"/>
             <field name="arch" type="xml">                                              
                <xpath expr='//filter[@string="Salesperson"]' position="after">
					<filter string="Agente" icon="terp-personal" context="{'group_by' : 'salesagent_for_customer_id'}" />
					<filter string="Subagente" icon="terp-personal" context="{'group_by' : 'second_salesagent_for_customer_id'}" />					
                </xpath>                       
             </field>
        </record>         
        
    </data>
</openerp>
