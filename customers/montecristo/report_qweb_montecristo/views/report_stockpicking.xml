<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
		<template id="report_picking" inherit_id="stock.report_picking">        

		    <xpath expr="//h2" position="after">
		        <t t-if="o.picking_type_id.code == 'incoming' and o.supplier_ddt_number">
		            <div style="font-weight: bold;">
		                <span>Rif. DDT: </span>
		                <span t-esc="o.supplier_ddt_number"/>
		                <span> del </span>
		                <span t-esc="formatLang(o.supplier_ddt_date, date=True)"/>
		            </div>
		            <br />
		        </t>
		    </xpath>
		    
			<xpath expr="//table[@t-if='o.pack_operation_ids']" position="after">
			    <t t-if="o.picking_type_id.code != 'internal'">
				    <t t-set="total_prices" t-value="get_total_prices(o)" />			    
	            	<table style="width:100%;">
	                           	
	    	          	<tr style="font-size: x-small; text-align: center;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%;">
								<div style="padding-left: 5pt;">TOTALE IMPONIBILE / UNTAXED AMOUNT</div>		
	                   		</td>		                            			                            					                            		
	                   	</tr>
	                   	<tr style="font-size: small; font-weight: bold; text-align: center;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%;">
	                   			<div style="padding-left: 5pt; border-bottom: 1px solid black;">
	                   			    <span t-esc="formatLang(total_prices[0])"/>	
	               			    </div>
	                   		</td>			                            			                            					                            		
	                   	</tr>
	                   	<tr style="font-size: x-small; text-align: center; margin-top:10px;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%;">
	                   			<div style="padding-left: 5pt;">TOTALE IMPOSTA / TAX AMOUNT</div>	
	                   		</td>		                            			                            					                            		
	                   	</tr>			                            	
	                   	<tr style="font-size: small; font-weight: bold; text-align: center;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%; border-bottom: 1px solid black;">
	                   			<div style="padding-left: 5pt;">
	                   				<span t-esc="formatLang(total_prices[1])"/>
	               				</div>		
	                   		</td>			                            			                            					                            		
	                   	</tr>
	                   	<tr style="font-size: x-small; text-align: center; margin-top:10px;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%;">
	                   			<div style="padding-left: 5pt;">TOTALE SPEDIZIONE / TOTAL AMOUNT</div>	
	                   		</td>		                            			                            					                            		
	                   	</tr>			                            	
	                   	<tr style="font-size: small; font-weight: bold; text-align: center;">
	                   		<td style="width: 75%;">
	                   			<br />
	                   		</td>
	                   		<td style="width: 25%; border-bottom: 1px solid black;">
	                   			<div style="padding-left: 5pt;">
	                   				<span t-esc="formatLang(total_prices[2])"/>
	               				</div>		
	                   		</td>			                            			                            					                            		
	                   	</tr>                   					                            				                            	
                   </table>
                </t>                   
                <table style="width:100%;">
		        	<tr style="font-size: small; font-weight: bold;">
						<td>
							<br/>
						    <div style="padding: 5pt;">
						    	<span t-esc="o.note" />
						    </div>
						</td>
					</tr>   	
				</table>    
			</xpath>		    
		    		    			
			<xpath expr="//table[@t-if='not o.pack_operation_ids']/tbody/tr[@t-foreach='o.move_lines']" position="after">
			    <tr t-foreach="total_quantities(o)" t-as="quantity_line">
			        <td class="text-right"><span>Totale </span><strong><span t-esc="quantity_line[1]" groups="product.group_uom" /></strong></td>
			        <td class="text-right">
			            <strong>
			                <span t-esc="formatLang(quantity_line[2])" />
		                </strong>
			        </td>
                    <t t-if="o.picking_type_id.code != 'incoming'"><td /></t>
                    <td />	
                    <t t-if="o.picking_type_id.code != 'outgoing'"><td /></t>                    		        
			    </tr>
			</xpath>

			<xpath expr="//table[@t-if='o.pack_operation_ids']/tbody/tr[@t-foreach='o.pack_operation_ids']" position="after">
			    <tr t-foreach="total_quantities(o)" t-as="quantity_line">
			        <td class="text-right"><span>Totale </span><strong><span t-esc="quantity_line[1]" groups="product.group_uom" /></strong></td>
			        <td class="text-right">
			            <strong>			            
			            	<span t-esc="formatLang(quantity_line[2])" />
		                </strong>			            	
			        </td>
                    <t t-if="o.picking_type_id.code != 'incoming'"><td /></t>
                    <td />
                    <t t-if="o.picking_type_id.code != 'outgoing'"><td /></t>			        
			    </tr>			      			    
			</xpath>			
									
        </template>
    </data>
</openerp>
