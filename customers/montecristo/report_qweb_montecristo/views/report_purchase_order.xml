<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		
		<template id="report_purchase_order">
		    <t t-call="report.html_container">
		        <t t-foreach="docs" t-as="o">
	                <div class="page">
	                    <div class="oe_structure">
		                    <t t-set="t_limit" t-value="53"/>
	                        <t t-esc="setLang(o.partner_id.lang)"/>
	                    	<t t-set="records" t-value="get_records(o)"/>
	                    	<t t-set="num_pages" t-value="get_num_pages(o, t_limit)"/>	                    
		                    <div class="row">
								<t t-foreach="num_pages" t-as="actual_page">
			                        <div class="col-xs-12">
			                            <table width="100%">	                            	
		                                    <tr>
		                                    	<td style="width: 50%;">
		                                    		<img src="/report_qweb_montecristo/static/img/Logo_Montecristo.png" style="width:100%; heigth: 100%"/>
		                                    	</td> 
	                            				<td style="vertical-align: top !important; padding-top: 35px;">
	                            					<table style="width:100%; height:180px; min-height: 180px !important; max-height:180px !important;">
	                            						<tr  style="border: 1px solid black; padding-top: 10px; padding-bottom: 10px;">
			 		                           				<td>
                                								<div style="text-align: center; font-size: 26px;">
                                									<span t-if="o.state not in ['draft','sent'] and o.partner_id.country_id and o.partner_id.country_id.code == 'IT'">CONFERMA D'ORDINE</span>
                                									<span t-if="o.state not in ['draft','sent'] and (not o.partner_id.country_id or o.partner_id.country_id.code != 'IT')">ORDER CONFIRMATION</span>                                									
                                									<span t-if="o.state in ['draft','sent'] and o.partner_id.country_id and o.partner_id.country_id.code == 'IT'">PROPOSTA D'ORDINE</span>
                                									<span t-if="o.state in ['draft','sent'] and (not o.partner_id.country_id or o.partner_id.country_id.code != 'IT')">ORDER PROPOSAL</span>                                               									
                            									</div>
                                							</td>	
	                            						</tr>
	                            						<tr style="border: 1px solid black; border-bottom: none;">
	                            							<td>
	                            								<div style="font-size: x-small; padding-left: 2px;">Spett.le/Bill to:</div>
	                            							</td>
	                            						</tr>
	                            						<tr style="border: 1px solid black; border-bottom: none; border-top: none;">	
	                            							<td>
	                            								<div style="padding-left: 12px;" t-esc="o.partner_id.name"/>
	                            								<div t-if="not o.partner_id.name" style="padding-left: 12px;"><br /></div>
	                            							</td>
	                            						</tr>
	                            						<tr  style="border: 1px solid black; border-bottom: none; border-top: none;">
	                            							<td>
	                            								<br />
	                            							</td>
		                     							</tr>
	                        							<tr  style="border: 1px solid black; border-bottom: none; border-top: none;">
	                        								<td>
	                        									<div style="padding-left: 12px;" t-esc="o.partner_id.street"/>
	                        									<div t-if="not o.partner_id.street" style="padding-left: 12px;"><br /></div>
	                        								</td>
	                        							</tr>
	                        							<tr  style="border: 1px solid black; border-top: none;">
	                        								<td>
	                        									<div style="padding-left: 12px;">
	                        										<span t-esc="o.partner_id.zip"/>
	                        										<span t-if="o.partner_id.zip">-</span>
	                        										<span t-esc="o.partner_id.city"/>
	                        										<span t-if="o.partner_id.province">(</span>
	                        										<span t-esc="o.partner_id.province.code"/>
	                        										<span t-if="o.partner_id.province">)</span>
	                        									</div>
	                        									<div t-if="(not o.partner_id.zip) and (not o.partner_id.province) and (not o.partner_id.city)" style="padding-left: 12px;"><br /></div>
	                        								</td>                                								                            								
	                        							</tr>
	                            					</table>
	                            				</td>
                            				</tr>
                                		</table>
			                            <table style="width:100%; heigth: 30px; border: 1px solid black; margin-top: 3px;">
			                            	<tr>
			                            		<td style="width:30%; border: 1px solid black; background-color: #cccccc;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">N.DOCUMENTO/DOC.N.</div>
			                            			<div style="text-align: center;" t-esc="o.name"/>
			                            		</td>
			                            		<td style="width:30%; border: 1px solid black; background-color: #cccccc;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">DATA DOCUMENTO/DATE</div>
			                            			<div style="text-align: center;" t-esc="formatLang(o.date_order, date=True)"/>	                            			
			                            		</td>
			                            		<td style="width:30%; border: 1px solid black;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">PARTITA IVA/VAT/TVA code</div>
			                            			<div style="text-align: center;" t-esc="o.partner_id.vat"/>		                            			
			                            		</td>
			                            		<td style="width:10%; border: 1px solid black;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">PAG.</div>
			                            			<div style="text-align: center;">
			                            				<span t-esc="actual_page+1"/>
			                            				<span>/</span>
			                            				<span t-esc="num_pages"/>
			                            			</div>	                            			
			                            		</td>			                            		                            			                            		
			                            	</tr>                            	
			                            </table>
			                            <table style="width:100%; heigth: 30px; border: 1px solid black;"> 
			                            	<tr>
			                            		<td style="width:38%; border: 1px solid black;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">CONDIZIONI DI PAGAMENTO / PAYMENT</div>
			                            			<t t-if="o.payment_term_id">
				                            			<div style="font-size: x-small; text-align: left; padding-left: 5px;">
				                            				<span t-esc="o.payment_term_id.name" /> 
				                            			</div>
				                            		</t>
				                            		<t t-if="not o.payment_term_id">	
				                            			<div style="font-size: x-small;"><br /></div>
				                            		</t>	
			                            		</td>
			                            		<t t-if="o.partner_id.country_id.code == 'IT'">
				                            		<td style="border: 1px solid black;">
				                            			<div style="font-size: xx-small; padding-left: 2px;">ABI</div>
				                            			<div>
				                            				<span  style="text-align: left; padding-left: 5px;" t-esc="get_abi(o)"/>
		                            					</div>		                            			
				                            		</td>
				                            		<td style="border: 1px solid black;">
				                            			<div style="font-size: xx-small; padding-left: 2px;">CAB</div>
				                            			<div>
				                            				<span  style="text-align: left; padding-left: 5px;" t-esc="get_cab(o)"/>
		                            					</div>		                            			
				                            		</td>					                            					                            			
			                            		</t>
			                            		<t t-if="o.partner_id.country_id.code != 'IT'">
				                            		<td colspan = "2" style="width:24%; border: 1px solid black;">
				                            			<div style="font-size: xx-small; padding-left: 2px;">IBAN</div>
				                            			<div style="font-size: x-small;">
				                            				<span  style="text-align: left; padding-left: 5px;" t-esc="get_iban(o)"/>
		                            					</div>		                            			
				                            		</td>				                            			
			                            		</t>
			                            		<td style="width:38%; border: 1px solid black;">
			                            			<div style="font-size: xx-small; padding-left: 2px;">BANCA D'APPOGGIO / BANK</div>
			                            			<div>
			                            				<span style="font-size: x-small; text-align: left; padding-left: 5px;">IBAN: IT64G0200814303000003689750</span><br />
			                            				<span style="font-size: x-small; text-align: left; padding-left: 5px;">SWIFT CODE/BIC: UNCRITM1528</span>
	                            					</div>	                            				 
			                            		</td>		                            			                            			                            		
			                            	</tr>
			                            </table>
			                            <table style="width:100%; border: 1px solid black; ">
			                            	<tr style="font-size: xx-small; border: 1px solid black;">
			                            		<td style="border: 1px solid black; vertical-align: middle;">
			                            			<div>COD.ART/CODE</div>
			                            		</td>
			                            		<td style="border: 1px solid black; vertical-align: middle;">
			                            			<div>COL.</div>
			                            		</td>
			                            		<td colspan="11" style="padding-left: 5pt; vertical-align: middle; border: 1px solid black;">
			                            			<div>DESCRIZIONE / DESCRIPTION</div>
			                            		</td>	                 
			                            		<td style="text-align: center; vertical-align: middle; border: 1px solid black;">
			                            			<div>TOT QT.</div>
			                            		</td>           		
			                            		<td style="border: 1px solid black; vertical-align: middle; font-size: 6pt; text-align: center;">
			                            			<div>SCONTO DISC.</div>
			                            		</td>            		
			                            		<td style="text-align: center; vertical-align: middle; border: 1px solid black;">
			                            			<div style="font-size: 5pt;">PREZZO UNITARIO / UNIT PRICE</div>
			                            		</td>
			                            		<td style="text-align: center; vertical-align: middle; border: 1px solid black;">
			                            			<div>IMPONIBILE / AMOUNT</div>
			                            		</td>
			                            		<td style="text-align: center; vertical-align: middle; border: 1px solid black;">
			                            			<div>IVA / VAT</div>
			                            		</td>
			                            	</tr>
			                            	<tr  style="font-size: x-small;">
			                            		<td style="width:10%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:28%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:5%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:3%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:8%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:8%; border: 1px solid black;"><div><br /></div></td>
			                            		<td style="width:5%; border: 1px solid black;"><div><br /></div></td>
			                            	</tr>
			                            	<t t-foreach="get_record_slice(records,actual_page*t_limit,(actual_page+1)*t_limit)" t-as="record">
			                            		<t t-if="record[0] == 0">
				                            		<tr  style="font-size: x-small; text-align: center;"> 
				                            			<td style="border: 1px solid black;"><div t-esc="record[1]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[2]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[3]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[4]"/></td>
				                            			<td style="border: 1px solid black;"><div t-esc="record[5]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[6]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[7]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[8]"/></td>
				                            			<td style="border: 1px solid black;"><div t-esc="record[9]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[10]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[11]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[12]"/></td>												
														<td style="border: 1px solid black;"><div t-esc="record[13]"/></td>																										
				                            			<td style="border: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[14]"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[15]"/><t t-if="not record[15]"><br /></t></td>
														<td style="border: 1px solid black; text-align: right; padding-right: 3pt;"><div t-esc="formatLang(record[16])"/></td>
														<td style="border: 1px solid black; text-align: right; padding-right: 3pt;"><div t-esc="formatLang(record[17])"/></td>
														<td style="border: 1px solid black;"><div t-esc="record[18]"/></td>																																																																																																											
				                            		</tr>
			                            		</t>
			                            		<t t-if="record[0] == 1 or record[0] == 3 or record[0] == 4">
				                            		<tr  style="font-size: x-small; font-weight: bold; text-align: center;"> 
				                            			<td style="border-left: 1px solid black; text-align: left; padding-left: 5pt;"><div t-esc="record[1]"/></td>
				                            			<td style="border-left: 1px solid black;"><div t-esc="record[2]"/></td>															
														<td style="border-left: 1px solid black; text-align: left; padding-left: 5pt;"><div t-esc="record[3]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[4]"/></td>
				                            			<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[5]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[6]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[7]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[8]"/></td>
				                            			<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[9]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[10]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[11]"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[12]"/></td>												
														<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[13]"/></td>																										
				                            			<td style="border-left: 1px solid black; text-align: right; padding-right: 2pt;"><div t-esc="record[14]"/></td>
														<td style="border-left: 1px solid black;"><div t-esc="record[15]"/><t t-if="not record[15]"><br /></t></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 3pt;"><div t-esc="formatLang(record[16])"/></td>
														<td style="border-left: 1px solid black; text-align: right; padding-right: 3pt;"><div t-esc="formatLang(record[17])"/></td>
														<td style="border-left: 1px solid black;"><div t-esc="record[18]"/></td>																																																																																																											
				                            		</tr>			                            			
			                            		</t>
			                            		<t t-if="record[0] == 2">
				                            		<tr  style="font-size: x-small; text-align: center;"> 
				                            			<td colspan="18" style="border-left: 1px solid black; border-top: 1px solid black; text-align: left; padding-left: 5pt;"><div t-esc="record[1]"/></td>																																																																																																											
				                            		</tr>			                            			
			                            		</t>				                            				                            				                            		
			                            	</t> 
			                            </table>
			                            <table style="width:100%; border: 1px solid black;">
  			                            	<t t-set="total_base" t-value="0"/>
			                            	<t t-set="total_amount" t-value="0"/>
			                            	<tr style="font-weight: italic; font-size: xx-small; text-align: left; padding-left: 5pt; border: 1px solid black; border-bottom: none;">		
			                            		<td colspan="4" style="padding-left: 5pt;">
			                            			<div>NOTE / NOTES</div>
			                            		</td>
			                            	</tr>			                            	
			                            	<tr style="font-size: xx-small; text-align: left; padding-left: 5pt; border: 1px solid black; border-top: none;">		
			                            		<td colspan="4" style="padding-left: 5pt;">
			                            			<t t-if="o.notes">
			                            				<div style="min-height: 32px;" t-esc="o.notes" />
		                            				</t>
		                            				<t t-if="not o.notes">
		                            					<div style="min-height: 32px;"><br /></div>
		                            				</t>
	                            				</td>
			                            	</tr>			                            				                                
			                            	<tr style="font-size: xx-small; border: 1px solid black; border-bottom: none; vertical-align: middle; text-align: center;">
			                            		<td style="width: 35%; border: 1px solid black; border-bottom: none;">
			                            			<div>PORTO / FREIGHT</div>	
			                            		</td>			                            		
			                            		<td style="width=15%; border: 1px solid black; border-bottom: none;">
			                            			<div>N. PZ. / N. PCS</div>
			                            		</td>		 
			                            		<td style="width: 25%; border: 1px solid black; border-bottom: none; text-align: left; padding-left: 5pt; font-size: 5pt; background-color: #cccccc;">
			                            			<div>TOTALE IMPONIBILE / UNTAXED AMOUNT</div>	
			                            		</td>					                            		
			                            		<td style="width: 25%; border: 1px solid black; border-bottom: none;  text-align: center; background-color: #cccccc;">
													<div>TOTALE / AMOUNT</div>	
			                            		</td>				                            		               
			                            	</tr>
			                            	<tr style="font-size: small; border: 1px solid black; border-top: none; text-align: center;">			                            		
			                            		<td style="font-size: x-small; border: 1px solid black; border-top: none;">
			                            			<t t-if="o.incoterm_id">
			                            				<div style="padding-left: 5pt; width: 120px; white-space: nowrap; overflow:hidden; text-overflow:ellipsis;" t-esc="o.incoterm_id.name"/>
			                            			</t>
			                            		</td>				                            		
			                            		<td style="border: 1px solid black; border-top: none;">
			                            			<div style="padding-left: 5pt;" t-esc="get_tot_pcs(o)"/>			                            			
			                            		</td>
			                            		<td style="border: 1px solid black; border-top: none; text-align: center; background-color: #cccccc;">
		                            				<div t-esc="formatLang(o.amount_untaxed)"/>	
			                            		</td>				                            		
			                            		<td style="border-left: 1px solid black; border-top: none; background-color: #cccccc;">
			                            			<div t-esc="formatLang(o.amount_total)"/>
			                            		</td>			                            		
		                            		</tr>		                            				                            	                            				                            				                            				                            				                            				                            		                            				                            	
			                            </table>
			                        </div>
	                            	<t t-if="num_pages != actual_page+1">
		                        	    <p style="font-size: 1px; color: #ffffff; margin-bottom: 0in; page-break-after: always">-</p>
	    	                        </t>
		                    	</t>		                        
		                    </div>
		                </div>
	                </div>
            	</t>
            </t>
		</template>		
		
</data>
</openerp>
								            